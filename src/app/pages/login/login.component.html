<div class="split-layout">
  
  <div class="brand-section">
    <div class="overlay"></div>
    <div class="brand-content">
      <img src="/logo2.png" alt="Logo Barbearia" class="logo fade-in-down">
      <div class="brand-text fade-in-up">
        <h2>Estilo e Tradição</h2>
        <p>Gerencie seu negócio com a precisão de um corte perfeito.</p>
      </div>
    </div>
  </div>

  <div class="form-section">
    <div class="form-container fade-in">
      
      <div class="header-mobile">
        <img src="logo2.png" alt="Logo Barbearia" class="mobile-logo">
      </div>

      <div class="header-text">
        <h1>Bem-vindo de volta!</h1>
        <p>Insira suas credenciais para acessar o painel.</p>
      </div>

      <form [formGroup]="form" (ngSubmit)="submit()">
        
        <div class="field">
          <label for="email">E-mail</label>
          <div class="input-wrapper">
            <input 
              id="email" 
              type="email" 
              formControlName="email" 
              placeholder="exemplo@barbearia.com"
              [class.error]="form.get('email')?.touched && form.get('email')?.invalid" 
            />
            <div class="field-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>
            </div>
          </div>
          <div class="error-feedback" *ngIf="form.get('email')?.touched && form.get('email')?.invalid" style="color: #ef4444;">
            Informe um e-mail válido.
          </div>
        </div>

        <div class="field">
          <label for="password">Senha</label>
          <div class="input-wrapper">
            <input
              id="password"
              [type]="showPassword ? 'text' : 'password'"
              formControlName="password"
              placeholder="••••••••"
              [class.error]="form.get('password')?.touched && form.get('password')?.invalid"
            />
            <div class="field-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
            </div>
            <button type="button" class="eye-btn" (click)="togglePassword()">
               <svg *ngIf="!showPassword" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#64748b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" y1="2" x2="22" y2="22"/></svg>
               <svg *ngIf="showPassword" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#2563eb" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>
            </button>
          </div>
        </div>

        <div class="actions-row">
           <label class="remember-me">
             <input type="checkbox" formControlName="rememberMe"> 
             Lembrar
           </label>

           <a routerLink="/recuperar-senha" class="forgot-link">
             Esqueci a senha
           </a>
        </div>

        <button class="btn-submit" type="submit" [disabled]="isLoading">
          <span *ngIf="isLoading" class="spinner"></span>
          {{ isLoading ? 'Validando...' : 'Acessar Painel' }}
        </button>

        <div class="footer">
          Não tem acesso? <b (click)="openContactModal()">Fale com o gerente</b>
        </div>
      </form>
    </div>
  </div>

  <div class="modal-overlay" *ngIf="showContactModal" (click)="closeContactModal()">
    <div class="modal-card fade-in-up" (click)="$event.stopPropagation()">
      <div class="modal-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
      </div>
      <h3>Criar Nova Conta</h3>
      <p>
        Por questões de segurança, o cadastro de novos usuários é restrito. 
        <br><br>
        Entre em contato com o <b>Administrador</b> ou <b>Gerente</b> da barbearia para solicitar seu acesso.
      </p>
      <button class="btn-modal" (click)="closeContactModal()">Entendi</button>
    </div>
  </div>

</div>